version: '3.4'
services:
  appsvr:
    image: tomee:8-jre-7.0.4-plume
    ports:
     - "80:8080"
    volumes:
     - "${PROJECT}/build/libs/${APPNAME}.war:/usr/local/tomee/webapps/${APPNAME}.war"
    healthcheck:
      test: wget --quiet --tries=1 --spider http://localhost:8080/appname/resources/health || exit 1
      interval: 5s
      timeout: 10s
      retries: 3
      start_period: 20s